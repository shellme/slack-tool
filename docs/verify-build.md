# ビルド検証コマンド

## 概要

slack-toolのローカルビルドを検証するコマンドです。リリース前にローカルでビルド・実行テストを行い、問題を早期発見します。

## 使用方法

```
/verify-build
```

## パラメータ

なし

## 例

```
/verify-build
```

## 実行方法

このコマンドが実行された場合、以下のスクリプトを実行してください：
```bash
./scripts/verify-build.sh
```

## 手動実行（人間向け）

```bash
# 直接スクリプトを実行
./scripts/verify-build.sh

# ヘルプを表示
./scripts/verify-build.sh --help
```

## 実行内容

1. **環境確認**
   - Goがインストールされているか確認
   - 必要な依存関係が揃っているか確認

2. **コードの構文チェック**
   - `go mod tidy` で依存関係を整理
   - `go vet` でコードの問題をチェック
   - `go fmt` でコードフォーマットを確認

3. **ビルドテスト**
   - `go build` でローカルビルドを実行
   - ビルド成功を確認

4. **実行テスト**
   - 生成された実行ファイルに実行権限を設定
   - `--version` コマンドで動作確認
   - `--help` コマンドでヘルプ表示確認

5. **クリーンアップ**
   - テスト用の実行ファイルを削除

## 注意事項

- リリース前に必ず実行してください
- ローカルで問題が発生した場合は、リモートでも同じ問題が発生します
- ディレクトリ構造に問題がある場合は、このコマンドで発見できます

## 前提条件

- Goがインストールされている
- プロジェクトルートで実行する
- 必要な依存関係がインストールされている

## トラブルシューティング

### ビルド失敗時

```bash
# 依存関係を再取得
go mod download
go mod tidy

# キャッシュをクリア
go clean -cache

# 詳細なエラー情報を表示
go build -v ./cmd/slack-tool
```

### よくあるエラー

1. **依存関係の問題**
   - `go mod tidy` で依存関係を整理
   - 不足している依存関係を `go get` で追加

2. **ディレクトリ構造の問題**
   - `main.go` と `cmd` パッケージが正しく分離されているか確認
   - インポートパスが正しいか確認

3. **実行権限の問題**
   - 生成された実行ファイルに実行権限を設定
   - `chmod +x slack-tool`

4. **実行ファイルの破損**
   - ディレクトリ構造を確認
   - インポートパスを確認

## 期待される動作

### 正常な場合

```
[SUCCESS] Go環境の確認完了
[SUCCESS] 依存関係の整理完了
[SUCCESS] コードの構文チェック完了
[SUCCESS] ビルドテスト完了
[SUCCESS] 実行テスト完了
[SUCCESS] すべての検証が成功しました！
```

### エラーの場合

```
[ERROR] ビルドに失敗しました
[ERROR] 実行ファイルが正常に動作しません
[ERROR] ディレクトリ構造に問題があります
```

## ヘルパーコマンド

- `/release` - 新バージョンのリリース
- `/update-homebrew` - Homebrew Formulaの更新
- `/test-homebrew` - Homebrewインストールのテスト

## 実行後の確認

検証完了後、以下のコマンドでリリースを実行してください：

```bash
/release v0.1.5
```

これにより、検証済みのコードでリリースが作成されます。
